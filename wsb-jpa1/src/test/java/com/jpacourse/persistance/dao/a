19:58:22.579 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.jpacourse.persistance.dao.PatientDaoTest]: PatientDaoTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
19:58:22.731 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.jpacourse.WsbJpaApplication for test class com.jpacourse.persistance.dao.PatientDaoTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.1)

2025-05-01T19:58:23.229+02:00  INFO 6956 --- [           main] c.j.persistance.dao.PatientDaoTest       : Starting PatientDaoTest using Java 17.0.11 with PID 6956 (started by bonow in C:\Users\bonow\Documents\Studia\WSB MASTER\sem2\JavaBackend\Jpa\wsb_jpa\wsb-jpa1)
2025-05-01T19:58:23.230+02:00  INFO 6956 --- [           main] c.j.persistance.dao.PatientDaoTest       : No active profile set, falling back to 1 default profile: "default"
2025-05-01T19:58:23.915+02:00  INFO 6956 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-01T19:58:23.957+02:00  INFO 6956 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 0 JPA repository interfaces.
2025-05-01T19:58:24.385+02:00  INFO 6956 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-01T19:58:24.455+02:00  INFO 6956 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.4.Final
2025-05-01T19:58:24.496+02:00  INFO 6956 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-01T19:58:24.909+02:00  INFO 6956 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-01T19:58:24.948+02:00  INFO 6956 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-01T19:58:25.204+02:00  INFO 6956 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/test user=SA
2025-05-01T19:58:25.206+02:00  INFO 6956 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-01T19:58:25.231+02:00  WARN 6956 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-01T19:58:25.253+02:00  INFO 6956 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.2.224
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-01T19:58:26.273+02:00  INFO 6956 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: drop table if exists address cascade
Hibernate: drop table if exists doctor cascade
Hibernate: drop table if exists medical_treatment cascade
Hibernate: drop table if exists patient cascade
Hibernate: drop table if exists visit cascade
Hibernate: create table address (id bigint generated by default as identity, address_line1 varchar(255) not null, address_line2 varchar(255) not null, city varchar(255) not null, postal_code varchar(255) not null, primary key (id))
Hibernate: create table doctor (address_id bigint unique, id bigint generated by default as identity, doctor_number varchar(255) not null, email varchar(255) not null, first_name varchar(255) not null, last_name varchar(255) not null, telephone_number varchar(255) not null, specialization enum ('DERMATOLOGIST','GP','OCULIST','SURGEON') not null, primary key (id))
Hibernate: create table medical_treatment (id bigint generated by default as identity, visit_id bigint, description varchar(255) not null, type enum ('EKG','RTG','USG'), primary key (id))
Hibernate: create table patient (date_of_birth date not null, is_insured boolean, address_id bigint unique, id bigint generated by default as identity, email varchar(255) not null, first_name varchar(255) not null, last_name varchar(255) not null, patient_number varchar(255) not null, telephone_number varchar(255) not null, primary key (id))
Hibernate: create table visit (doctor_id bigint, id bigint generated by default as identity, patient_id bigint not null, time timestamp(6) not null, description varchar(255) not null, primary key (id))
Hibernate: alter table if exists doctor add constraint FK55wcpoxucujk1vqonmjuljb2y foreign key (address_id) references address
Hibernate: alter table if exists medical_treatment add constraint FKo00frfud2econu6prla0a0yi3 foreign key (visit_id) references visit
Hibernate: alter table if exists patient add constraint FKlpwpmtdbdvnxm8fxlxpq2fugh foreign key (address_id) references address
Hibernate: alter table if exists visit add constraint FKc63541y8ppkvsovm00gumv90t foreign key (doctor_id) references doctor
Hibernate: alter table if exists visit add constraint FKrban5yeabnx30seqm69jw44e foreign key (patient_id) references patient
2025-05-01T19:58:26.325+02:00  INFO 6956 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-01T19:58:26.625+02:00  WARN 6956 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-01T19:58:26.985+02:00  INFO 6956 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2'. Database available at 'jdbc:h2:file:~/test'
2025-05-01T19:58:27.084+02:00  INFO 6956 --- [           main] c.j.persistance.dao.PatientDaoTest       : Started PatientDaoTest in 4.142 seconds (process running for 5.275)
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
Hibernate: select pe1_0.id,pe1_0.address_id,pe1_0.date_of_birth,pe1_0.email,pe1_0.first_name,pe1_0.is_insured,pe1_0.last_name,pe1_0.patient_number,pe1_0.telephone_number from patient pe1_0 where (select count(*) from visit v1_0 where pe1_0.id=v1_0.patient_id)>?
Hibernate: select ae1_0.id,ae1_0.address_line1,ae1_0.address_line2,ae1_0.city,d1_0.id,d1_0.doctor_number,d1_0.email,d1_0.first_name,d1_0.last_name,d1_0.specialization,d1_0.telephone_number,p1_0.id,p1_0.date_of_birth,p1_0.email,p1_0.first_name,p1_0.is_insured,p1_0.last_name,p1_0.patient_number,p1_0.telephone_number,ae1_0.postal_code from address ae1_0 left join doctor d1_0 on ae1_0.id=d1_0.address_id left join patient p1_0 on ae1_0.id=p1_0.address_id where ae1_0.id=?
Hibernate: select v1_0.patient_id,v1_0.id,v1_0.description,v1_0.doctor_id,v1_0.time from visit v1_0 where v1_0.patient_id=?
2025-05-01T19:58:28.210+02:00  INFO 6956 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: drop table if exists address cascade
2025-05-01T19:58:28.219+02:00  WARN 6956 --- [ionShutdownHook] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 90121, SQLState: 90121
2025-05-01T19:58:28.219+02:00 ERROR 6956 --- [ionShutdownHook] o.h.engine.jdbc.spi.SqlExceptionHelper   : Baza danych jest już zamknięta (aby zablokować samoczynne zamykanie podczas zamknięcia VM dodaj ";DB_CLOSE_ON_EXIT=FALSE" do URL bazy danych)
Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-05-01T19:58:28.222+02:00  WARN 6956 --- [ionShutdownHook] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 90121, SQLState: 90121
2025-05-01T19:58:28.222+02:00 ERROR 6956 --- [ionShutdownHook] o.h.engine.jdbc.spi.SqlExceptionHelper   : Baza danych jest już zamknięta (aby zablokować samoczynne zamykanie podczas zamknięcia VM dodaj ";DB_CLOSE_ON_EXIT=FALSE" do URL bazy danych)
Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-05-01T19:58:28.223+02:00  WARN 6956 --- [ionShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'entityManagerFactory': org.hibernate.exception.JDBCConnectionException: Unable to release JDBC Connection used for DDL execution [Baza danych jest już zamknięta (aby zablokować samoczynne zamykanie podczas zamknięcia VM dodaj ";DB_CLOSE_ON_EXIT=FALSE" do URL bazy danych)
Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]] [n/a]
2025-05-01T19:58:28.223+02:00  INFO 6956 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-01T19:58:28.228+02:00  INFO 6956 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
